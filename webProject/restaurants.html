<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="description" content="Yoga Studio Template">
  <meta name="keywords" content="Yoga, unica, creative, html">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Yummy | 맛집 리스트</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700&display=swap" rel="stylesheet">

  <!-- Css Styles -->
  <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
  <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="css/nice-select.css" type="text/css">
  <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
  <link rel="stylesheet" href="css/style.css" type="text/css">
  <style>
    .row {
      display: flex;
      flex-wrap: wrap;
    }

    .hidden {
      display: none;
    }

    .ri-thumb {
      width: 100%;
      height: 200px;
      background-size: cover;
      background-position: center;
    }
  </style>
</head>

<body>
  <!-- Header Section Begin -->
  <header class="header-section-other">
    <div class="container-fluid">
      <div class="logo">
        <a href="home.html"><img src="img/little-logo.png" alt=""></a>
      </div>
      <div class="nav-menu">
        <nav class="main-menu mobile-menu">
          <ul>
            <li><a href="home.html">Home</a></li>
            <li class="active"><a href="restaurants.html">맛집 목록</a></li>
            <li><a href="random.html">오늘의 식사</a></li>
            <li><a href="news.html">맛집News</a></li>
          </ul>
        </nav>
      </div>
      <div id="mobile-menu-wrap"></div>
    </div>
  </header>
  <!-- Header End -->

  <!-- Hero Search Section Begin -->
  <div class="hero-search set-bg" data-setbg="img/search-bg.jpg">
    <div class="container">
      <div class="filter-table">
        <form id="filter-form" class="filter-search">
          <select id="category">
            <option value="">카테고리</option>
            <option value="한식">한식</option>
            <option value="분식">분식</option>
            <option value="패스트푸드">패스트푸드</option>
            <option value="국수">국수</option>
            <option value="돼지고기구이">돼지고기구이</option>
            <option value="태국음식">태국음식</option>
            <option value="카페">카페</option>
          </select>
          <select id="tag">
            <option value="">가게 분류</option>
            <option value="가성비">가성비 최고</option>
            <option value="맛">The미식</option>
            <option value="양">배터지게 먹어요</option>
            <option value="이벤트">이벤트 중</option>
          </select>
          <button type="submit">필터 적용</button>
        </form>
      </div>
    </div>
  </div>
  <!-- Hero Search Section End -->

  <!-- Recipe Section Begin -->
  <section class="recipe-section spad">
    <div class="container">
      <div id="recipe-container" class="row"></div>
    </div>
  </section>
  <!-- Recipe Section End -->

  <!-- Footer Section Begin -->
  <footer class="footer-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-4">
          <div class="fs-left">
            <div class="logo">
              <img src="img/footer-logo.png" alt="">
            </div>
          </div>
        </div>
        <div class="col-lg-7">
          <form action="#" class="subscribe-form">
            <p><b>개인정보취급방침 | 웹회원 이용약관 | 책임한계와 법적고지 | 이메일 무단수집 거부</b></p>
            <p>서울특별시 관악구 봉천로 227 대표이사: 마루치</p>
            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              Copyright &copy;
              <script>document.write(new Date().getFullYear());</script> All rights reserved | This
              template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by Colorlib
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </form>
        </div>
      </div>
    </div>
  </footer>
  <!-- Footer Section End -->

  <!-- Js Plugins -->
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.slicknav.js"></script>
  <script src="js/jquery.nice-select.min.js"></script>
  <script src="js/mixitup.min.js"></script>
  <script src="js/main.js"></script>
  <script>
    const recipes = [
      {
        category: '한식',
        img: 'img/recipe/그김에.jpg',
        title: '그김에',
        description: '바삭한 김 청정 흰쌀밥 얼큰한 찌개 밥상의 정석<br>서울 관악구 보라매로3길 17 동방파레스 1층',
      },
      {
        category: '한식',
        tag: '가성비',
        img: 'img/recipe/늘콩.jpg',
        title: '늘콩',
        description: '늘 한결곁은 마음과 정성의 콩나물국밥/비빔밥<br>서울 관악구 신림로 387',
      },
      {
        category: '한식',
        tag: '맛',
        img: 'img/recipe/미전.jpg',
        title: '미전',
        description: '오징어철판불고기 맛집<br>서울 동작구 보라매로3길 29 해태보라매타워 2층',
      },
      {
        category: '한식',
        tag: '양',
        img: 'img/recipe/새벽감자탕.jpg',
        title: '새벽감자탕',
        description: '푸짐한 점심메뉴 우거지감자탕 뼈해장국 뼈구이<br>서울 관악구 보라매로3길7 1층 101호',
      },
      {
        category: '한식',
        img: 'img/recipe/전주집.jpg',
        title: '전주집',
        description: '가성비 좋은 집밥 백반<br>서울 관악구 보라매로3길 29 지하 1층',
      },
      {
        category: '한식',
        img: 'img/recipe/한촌설렁탕.jpg',
        title: '한촌설렁탕',
        description: '40년전통 정직한 육수, 맛있는 설렁탕<br>서울 동작구 보라매로5길 35 보라매현대아파트 1층 상가',
      },
      {
        category: '돼지고기구이',
        tag: '맛',
        img: 'img/recipe/황군집.jpg',
        title: '황군집',
        description: '반찬 잘나오는 보라매 고기맛집<br>서울 관악구 보라매로 17 나동 102호',
      },
      {
        category: '일식',
        tag: '양',
        img: 'img/recipe/허수아비돈까스.jpg',
        title: '허수아비돈까스',
        description: '담백하고 가성비 좋은 돈가스<br>서울 동작구 보라매로3길 29 2층',
      },
      {
        category: '일식',
        tag: ['이벤트', '맛'],
        img: 'img/recipe/katsu97.png',
        title: 'Katsu97',
        description: '신선한 원육과 정성스런 차림 맛있는 식사<br>서울 관악구 봉천로7길 3 현교빌딩 1층',
      },
      {
        category: '패스트푸드',
        tag: '이벤트',
        img: 'img/recipe/kfc.jpg',
        title: 'KFC',
        description: '맛있는 치킨을 쉽고 빠르게<br>서울 관악구 보라매로3길 29 1층',
      },
      {
        category: '패스트푸드',
        img: 'img/recipe/롯데리아.jpg',
        title: '롯데리아',
        description: '맛있는 즐거움, 깔끔한 버거<br>서울 동작구 보라매로5길 35 103호',
      },
      {
        category: '태국음식',
        tag: '양',
        img: 'img/recipe/레몬그라스타이.jpg',
        title: '레몬그라스타이',
        description: '태국 5성급 호텔 요리사 출신의 진짜 태국의 맛!<br>서울 관악구 봉천로 245 1층',
      },
      {
        category: '분식',
        img: 'img/recipe/죠스떡볶이.jpg',
        title: '죠스떡볶이',
        description: '죠스는 항상 즐겁습니다.<br>서울 관악구 보라매로3길 29 1층',
      },
      {
        category: '분식',
        tag: '가성비',
        img: 'img/recipe/맥시칸즉석햄버거.jpg',
        title: '맥시칸즉석햄버거',
        description: '추억의 라볶이와 버거<br>서울 관악구 당곡길 9',
      },
      {
        category: '국수',
        tag: ['양', '가성비'],
        img: 'img/recipe/만나칼국수.jpg',
        title: '만나칼국수',
        description: '푸짐하고 가성비 좋은 한끼<br>서울 관악구 봉천로7길 23 주흥빌딩',
      },
      {
        category: '국수',
        tag: '가성비',
        img: 'img/recipe/멸치사골곰탕국수집.jpg',
        title: '멸치사골곰탕국수집',
        description: '국물이 끝내줘요~~<br>서울 관악구 보라매로2길 1',
      },
      {
        category: '카페',
        img: 'img/recipe/빽다방.jpg',
        title: '빽다방',
        description: '합리적인 가격, 놀라운 퀄리티<br>서울 관악구 보라매로5가길 7 1층 105호',
      },
      {
        category: '카페',
        tag: '이벤트',
        img: 'img/recipe/캔팩토리.jpg',
        title: '캔팩토리',
        description: '늦게까지 여는 단체 캔포장 맛집<br>서울 관악구 보라매로 15-8 1층',
      }
    ];

    // 필터링된 결과를 표시할 함수를 만듭니다.
    function displayFilteredRecipes(recipes) {
      // 필터링된 결과를 표시할 부모 요소를 가져옵니다.
      const recipeContainer = document.querySelector('#recipe-container');
      // 이전에 표시되었던 레시피 아이템을 모두 제거합니다.
      recipeContainer.innerHTML = '';

      // 필터링된 결과를 반복하여 레시피 아이템을 생성하고 추가합니다.
      recipes.forEach((recipe, index) => {
        // 6개씩 나눠서 새로운 row를 생성합니다.
        if (index % 6 === 0) {
          const newRow = document.createElement('div');
          newRow.classList.add('row', 'hidden');
          recipeContainer.appendChild(newRow);
        }

        const row = recipeContainer.lastElementChild;

        // 레시피 아이템의 HTML을 생성합니다.
        const recipeItemHTML = `
          <div class="col-lg-4 col-md-6">
            <div class="recipe-item">
              <div class="ri-thumb set-bg" style="background-image: url('${recipe.img}');"></div>
              <div class="ri-text">
                <div class="cat-name">${recipe.category}</div>
                  <h4>${recipe.title}</h4>
                  <p>${recipe.description}</p>
              </div>
            </div>
          </div>`;

        // 레시피 아이템을 해당하는 row에 추가합니다.
        row.innerHTML += recipeItemHTML;
      });

      // 무한 스크롤 초기화
      YesScroll();
    }

    // 페이지 로딩 시 모든 레시피를 표시합니다.
    displayFilteredRecipes(recipes);

    // 필터링된 결과를 표시할 때마다 호출되는 함수를 등록합니다.
    $(document).ready(function () {
      $('#filter-form').submit(function (e) {
        e.preventDefault();

        var category = $('#category').val();
        var tag = $('#tag').val();

        $('.recipe-item').hide();

        if (category === '' && tag === '') {
          $('.recipe-item').show();
        } else if (category !== '' && tag === '') {
          $('.recipe-item[data-category="' + category + '"]').show();
        } else if (category === '' && tag !== '') {
          $('.recipe-item[data-tag="' + tag + '"]').show();
        } else {
          $('.recipe-item[data-category="' + category + '"][data-tag="' + tag + '"]').show();
        }
      });
    });

    // 무한 페이지 스크롤 구현(JS)
    function YesScroll() {
      const rows = document.querySelectorAll('.recipe-section .row');
      let currentRow = 0;

      // 첫 번째 행만 초기 표시
      if (rows.length > 0) {
        rows[0].classList.remove('hidden');
      }

      window.addEventListener('scroll', OnScroll, { passive: true });

      // 페이지 끝에 도달했는지 확인
      function OnScroll() {
        const fullHeight = document.documentElement.scrollHeight;
        const screenHeight = window.innerHeight;
        const scrollPosition = window.scrollY;

        if (scrollPosition + screenHeight >= fullHeight - 100) {
          showNextRow();
        }
      }

      // 다음 행을 보여줌
      function showNextRow() {
        if (currentRow < rows.length - 1) {
          currentRow++;
          rows[currentRow].classList.remove('hidden');
        }
      }
    }
  </script>
</body>

</html>
